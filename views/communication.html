<div id="page-wrapper">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Communication</h1>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->


        <div class="row">
          <div class="table-responsive">
              <table id="communication-table" class="table table-striped table-bordered table-hover" id="dataTables-example">
                  <thead>
                      <tr>
                          <th>Letter Title</th>
                          <th>Receiver Email</th>
                      </tr>
                  </thead>
              </table>
          </div>
          <!-- /.table-responsive -->
        </div>

        <!-- /.row -->

    </div>
    <!-- /.container-fluid -->
</div>
<!-- /#page-wrapper -->

<script type="text/javascript">

  getDetails();

    function getDetails(){

        $("#communication-table").DataTable({
        processing : true,
        serverSide : true,
        bDestroy: true,
        searching: false,
        ordering: false,
        pagingType : "simple",
        preDrawCallback : function( settings ) {
          if (settings.aoData.length < settings._iDisplayLength){
            settings._iRecordsTotal=0;
            settings._iRecordsDisplay=0;
          }else{
            settings._iRecordsTotal=100000;
            settings._iRecordsDisplay=100000;
          }
          console.log(settings);
        },
        responsive: true,
        language: {
              "zeroRecords": "Nothing found",
              "info": "Showing page _PAGE_",
              "infoEmpty": "",
              "infoFiltered": ""
        },
        ajax : {
          url: "api/person/communication",
          type: "GET",
          beforeSend: function(xhr){xhr.setRequestHeader('Authentication', localStorage.getItem("token"))},
          dataSrc : function(resp){
            return resp;
          },
          data : function ( d ) {
            d.offset = d.start;
            d.limit = d.length;

            delete d.start;
            delete d.columns;
            delete d.length;
            delete d.draw;
            console.log(d);
          }
        },
        columns : [
            { "data": "letter_title",
              "render": function ( data ) {
                return '<div><span class="badge">'+data+'</div>';
              }
            },
            { "data": "email" }
        ]
      });
    }


</script>
